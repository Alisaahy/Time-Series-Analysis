\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\providecommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{}
    \pretitle{\vspace{\droptitle}}
  \posttitle{}
    \author{}
    \preauthor{}\postauthor{}
    \date{}
    \predate{}\postdate{}
  

\begin{document}

\hypertarget{option-2.-conduct-an-unpooled-regression-comparison.}{%
\section{Option \#2. Conduct an unpooled regression
comparison.}\label{option-2.-conduct-an-unpooled-regression-comparison.}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(data.table)}
\KeywordTok{library}\NormalTok{(QMSS)}

\NormalTok{GSS =}\StringTok{ }\NormalTok{data.table}\OperatorTok{::}\KeywordTok{fread}\NormalTok{(}\StringTok{"/Users/hengyuai/Desktop/TS/Lab1/trends-gss.csv"}\NormalTok{,}
                        \DataTypeTok{sep =} \StringTok{","}\NormalTok{)}

\KeywordTok{library}\NormalTok{(plyr)}
\KeywordTok{library}\NormalTok{(ggplot2)}
\end{Highlighting}
\end{Shaded}

\hypertarget{recodes}{%
\subsection{Recodes}\label{recodes}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{GSS[GSS}\OperatorTok{$}\NormalTok{happy }\OperatorTok{<}\StringTok{ }\DecValTok{4}\NormalTok{]}
\NormalTok{GSS}\OperatorTok{$}\NormalTok{felgo =}\StringTok{ }\KeywordTok{ifelse}\NormalTok{((GSS}\OperatorTok{$}\NormalTok{happy }\OperatorTok{<=}\StringTok{ }\DecValTok{2}\NormalTok{), }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{)}
\NormalTok{GSS}\OperatorTok{$}\NormalTok{nyear =}\StringTok{ }\NormalTok{GSS}\OperatorTok{$}\NormalTok{year}\DecValTok{-1973}
\NormalTok{GSS}\OperatorTok{$}\NormalTok{south =}\StringTok{ }\KeywordTok{ifelse}\NormalTok{((GSS}\OperatorTok{$}\NormalTok{region }\OperatorTok{>=}\StringTok{ }\DecValTok{5} \OperatorTok{&}\StringTok{ }\NormalTok{GSS}\OperatorTok{$}\NormalTok{region }\OperatorTok{<=}\StringTok{ }\DecValTok{7}\NormalTok{), }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{)}
\NormalTok{GSS}\OperatorTok{$}\NormalTok{repub =}\StringTok{ }\KeywordTok{ifelse}\NormalTok{((GSS}\OperatorTok{$}\NormalTok{partyid }\OperatorTok{>=}\StringTok{ }\DecValTok{5} \OperatorTok{&}\StringTok{ }\NormalTok{GSS}\OperatorTok{$}\NormalTok{partyid }\OperatorTok{<=}\StringTok{ }\DecValTok{6}\NormalTok{), }\DecValTok{1}\NormalTok{, }\DecValTok{0}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\hypertarget{regressions}{%
\subsection{Regressions}\label{regressions}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{felgo80 =}\StringTok{ }\KeywordTok{lm}\NormalTok{(felgo }\OperatorTok{~}\StringTok{ }\NormalTok{repub }\OperatorTok{+}\StringTok{ }\NormalTok{age }\OperatorTok{+}\StringTok{ }\NormalTok{educ }\OperatorTok{+}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(sex) }\OperatorTok{+}\StringTok{ }\NormalTok{south }\OperatorTok{+}\StringTok{ }\NormalTok{nyear, }\DataTypeTok{data =}\NormalTok{ GSS, }\DataTypeTok{subset =}\NormalTok{ (year }\OperatorTok{>}\StringTok{ }\DecValTok{1980} \OperatorTok{&}\StringTok{ }\NormalTok{year }\OperatorTok{<=}\StringTok{ }\DecValTok{1990} \OperatorTok{&}\StringTok{ }\NormalTok{partyid }\OperatorTok{<}\StringTok{ }\DecValTok{7}\NormalTok{))}
\KeywordTok{summary}\NormalTok{(felgo80)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = felgo ~ repub + age + educ + as.factor(sex) + south + 
##     nyear, data = GSS, subset = (year > 1980 & year <= 1990 & 
##     partyid < 7))
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.01132  0.06897  0.10987  0.14022  0.28220 
## 
## Coefficients:
##                  Estimate Std. Error t value Pr(>|t|)    
## (Intercept)     0.6493377  0.0202208  32.112  < 2e-16 ***
## repub           0.0395197  0.0062107   6.363 2.04e-10 ***
## age             0.0003672  0.0001601   2.294   0.0218 *  
## educ            0.0116090  0.0009196  12.624  < 2e-16 ***
## as.factor(sex)2 0.0043020  0.0055019   0.782   0.4343    
## south           0.0046633  0.0057764   0.807   0.4195    
## nyear           0.0045465  0.0010533   4.316 1.60e-05 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.3185 on 13740 degrees of freedom
##   (279 observations deleted due to missingness)
## Multiple R-squared:  0.01856,    Adjusted R-squared:  0.01813 
## F-statistic:  43.3 on 6 and 13740 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{felgo90 =}\StringTok{ }\KeywordTok{lm}\NormalTok{(felgo }\OperatorTok{~}\StringTok{ }\NormalTok{repub }\OperatorTok{+}\StringTok{ }\NormalTok{age }\OperatorTok{+}\StringTok{ }\NormalTok{educ }\OperatorTok{+}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(sex) }\OperatorTok{+}\StringTok{ }\NormalTok{south }\OperatorTok{+}\StringTok{ }\NormalTok{nyear, }\DataTypeTok{data =}\NormalTok{ GSS, }\DataTypeTok{subset =}\NormalTok{ (year }\OperatorTok{>}\StringTok{ }\DecValTok{1990} \OperatorTok{&}\StringTok{ }\NormalTok{year }\OperatorTok{<=}\StringTok{ }\DecValTok{2000} \OperatorTok{&}\StringTok{ }\NormalTok{partyid }\OperatorTok{<}\StringTok{ }\DecValTok{7}\NormalTok{))}
\KeywordTok{summary}\NormalTok{(felgo90)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = felgo ~ repub + age + educ + as.factor(sex) + south + 
##     nyear, data = GSS, subset = (year > 1990 & year <= 2000 & 
##     partyid < 7))
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -0.9918  0.0720  0.1082  0.1366  0.2807 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(>|t|)    
## (Intercept)      7.332e-01  2.632e-02  27.852  < 2e-16 ***
## repub            3.761e-02  5.978e-03   6.292 3.23e-10 ***
## age              6.912e-07  1.581e-04   0.004   0.9965    
## educ             1.110e-02  9.338e-04  11.883  < 2e-16 ***
## as.factor(sex)2 -1.293e-02  5.389e-03  -2.400   0.0164 *  
## south            9.030e-03  5.576e-03   1.619   0.1054    
## nyear           -4.457e-05  9.295e-04  -0.048   0.9618    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.3167 on 14168 degrees of freedom
##   (264 observations deleted due to missingness)
## Multiple R-squared:  0.01502,    Adjusted R-squared:  0.01461 
## F-statistic: 36.01 on 6 and 14168 DF,  p-value: < 2.2e-16
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{felgo00 =}\StringTok{ }\KeywordTok{lm}\NormalTok{(felgo }\OperatorTok{~}\StringTok{ }\NormalTok{repub }\OperatorTok{+}\StringTok{ }\NormalTok{age }\OperatorTok{+}\StringTok{ }\NormalTok{educ }\OperatorTok{+}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(sex) }\OperatorTok{+}\StringTok{ }\NormalTok{south }\OperatorTok{+}\StringTok{ }\NormalTok{nyear, }\DataTypeTok{data =}\NormalTok{ GSS, }\DataTypeTok{subset =}\NormalTok{ (year }\OperatorTok{>}\StringTok{ }\DecValTok{2000} \OperatorTok{&}\StringTok{ }\NormalTok{year }\OperatorTok{<}\StringTok{ }\DecValTok{2010} \OperatorTok{&}\StringTok{ }\NormalTok{partyid }\OperatorTok{<}\StringTok{ }\DecValTok{7}\NormalTok{))}
\KeywordTok{summary}\NormalTok{(felgo00)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Call:
## lm(formula = felgo ~ repub + age + educ + as.factor(sex) + south + 
##     nyear, data = GSS, subset = (year > 2000 & year < 2010 & 
##     partyid < 7))
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -1.00204  0.07344  0.12445  0.16481  0.34266 
## 
## Coefficients:
##                   Estimate Std. Error t value Pr(>|t|)    
## (Intercept)      8.066e-01  6.510e-02  12.390  < 2e-16 ***
## repub            5.934e-02  8.916e-03   6.656 3.01e-11 ***
## age             -7.603e-07  2.289e-04  -0.003   0.9974    
## educ             1.306e-02  1.283e-03  10.177  < 2e-16 ***
## as.factor(sex)2 -8.035e-03  7.896e-03  -1.018   0.3089    
## south            2.146e-03  8.140e-03   0.264   0.7921    
## nyear           -4.032e-03  1.899e-03  -2.124   0.0337 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.3398 on 7493 degrees of freedom
##   (4430 observations deleted due to missingness)
## Multiple R-squared:  0.02245,    Adjusted R-squared:  0.02167 
## F-statistic: 28.68 on 6 and 7493 DF,  p-value: < 2.2e-16
\end{verbatim}

\hypertarget{display-regression}{%
\subsection{Display regression}\label{display-regression}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(stargazer) }\CommentTok{##使用stargazer可以将R构建的模型结果以LATEX、HTML和ASCII格式输出，方便我们生成标准格式的表格结合rmarkdown来进行使用}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## Please cite as:
\end{verbatim}

\begin{verbatim}
##  Hlavac, Marek (2018). stargazer: Well-Formatted Regression and Summary Statistics Tables.
\end{verbatim}

\begin{verbatim}
##  R package version 5.2.2. https://CRAN.R-project.org/package=stargazer
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{stargazer}\NormalTok{(felgo80, felgo90, felgo00, }\DataTypeTok{type =} \StringTok{"text"}\NormalTok{, }\DataTypeTok{omit.stat =} \KeywordTok{c}\NormalTok{(}\StringTok{"rsq"}\NormalTok{, }\StringTok{"f"}\NormalTok{), }\DataTypeTok{add.lines =} \KeywordTok{list}\NormalTok{(}\KeywordTok{c}\NormalTok{(}\StringTok{"Years covered"}\NormalTok{,}\StringTok{"1981-1990"}\NormalTok{,}\StringTok{"1991-2000"}\NormalTok{,}\StringTok{"2001-2010"}\NormalTok{)))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
## ===========================================================================
##                                       Dependent variable:                  
##                     -------------------------------------------------------
##                                              felgo                         
##                            (1)                (2)                (3)       
## ---------------------------------------------------------------------------
## repub                    0.040***           0.038***          0.059***     
##                          (0.006)            (0.006)            (0.009)     
##                                                                            
## age                      0.0004**           0.00000           -0.00000     
##                          (0.0002)           (0.0002)          (0.0002)     
##                                                                            
## educ                     0.012***           0.011***          0.013***     
##                          (0.001)            (0.001)            (0.001)     
##                                                                            
## as.factor(sex)2           0.004             -0.013**           -0.008      
##                          (0.006)            (0.005)            (0.008)     
##                                                                            
## south                     0.005              0.009              0.002      
##                          (0.006)            (0.006)            (0.008)     
##                                                                            
## nyear                    0.005***           -0.00004          -0.004**     
##                          (0.001)            (0.001)            (0.002)     
##                                                                            
## Constant                 0.649***           0.733***          0.807***     
##                          (0.020)            (0.026)            (0.065)     
##                                                                            
## ---------------------------------------------------------------------------
## Years covered           1981-1990          1991-2000          2001-2010    
## Observations              13,747             14,175             7,500      
## Adjusted R2               0.018              0.015              0.022      
## Residual Std. Error 0.318 (df = 13740) 0.317 (df = 14168) 0.340 (df = 7493)
## ===========================================================================
## Note:                                           *p<0.1; **p<0.05; ***p<0.01
\end{verbatim}

significant difference between people with different party id, education
level and age.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{library}\NormalTok{(broom) }\CommentTok{##Broom让模型输出结果更整洁。broom包可以将lmnlst.test等功能的输出结果转为数据框的形式。}
\CommentTok{## 这个包主要提供3个函数，即tidy/augment/glance，其中tidy是将模型的输出结果转为数据框，augment是将模型输出的参数值与模型参数整合到一个表中，而glance，正如其一瞥的意思，是将模型结果中的重要指标转为一行。}

\NormalTok{hap80 =}\StringTok{ }\KeywordTok{tidy}\NormalTok{(felgo80)}
\NormalTok{hap80}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 7 x 5
##   term            estimate std.error statistic   p.value
##   <chr>              <dbl>     <dbl>     <dbl>     <dbl>
## 1 (Intercept)     0.649     0.0202      32.1   3.11e-218
## 2 repub           0.0395    0.00621      6.36  2.04e- 10
## 3 age             0.000367  0.000160     2.29  2.18e-  2
## 4 educ            0.0116    0.000920    12.6   2.47e- 36
## 5 as.factor(sex)2 0.00430   0.00550      0.782 4.34e-  1
## 6 south           0.00466   0.00578      0.807 4.20e-  1
## 7 nyear           0.00455   0.00105      4.32  1.60e-  5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{hap80 =}\StringTok{ }\KeywordTok{rename}\NormalTok{(felgo80, }\KeywordTok{c}\NormalTok{(}\StringTok{"estimate"}\NormalTok{=}\StringTok{"e80"}\NormalTok{, }\StringTok{"std.error"}\NormalTok{=}\StringTok{"se80"}\NormalTok{))}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## The following `from` values were not present in `x`: estimate, std.error
\end{verbatim}


\end{document}
